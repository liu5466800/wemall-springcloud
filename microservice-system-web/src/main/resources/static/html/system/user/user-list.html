<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>用户列表</title>
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link rel="stylesheet" href="../../../css/common/font.css">
    <link rel="stylesheet" href="../../../css/common/xadmin.css">
    
    <script type="text/javascript" src="../../../plugins/jquery-3.2.1/jquery-3.2.1.min.js"></script>
    <script type="text/javascript" src="../../../plugins/layui-2.3.0/layui.js"></script>
    <script type="text/javascript" src="../../../js/common/xadmin.js"></script>
    <script type="text/javascript" src="../../../js/common/config.js"></script>
    <!-- 让IE8/9支持媒体查询，从而兼容栅格 -->
    <!--[if lt IE 9]>
      <script src="https://cdn.staticfile.org/html5shiv/r29/html5.min.js"></script>
      <script src="https://cdn.staticfile.org/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>
  <body class="layui-anim layui-anim-up">
  	<div class="x-nav">
      <span class="layui-breadcrumb">
        <a href="">首页</a>
        <a href="">系统管理</a>
        <a><cite>用户列表</cite></a>
      </span>
      <a class="layui-btn layui-btn-small" style="line-height:1.6em;margin-top:3px;float:right" href="javascript:location.replace(location.href);" title="刷新">
        <i class="layui-icon" style="line-height:30px">ဂ</i></a>
    </div>
    <div class="tab-body" style="margin:5px">
      <div class="handle-box">
        <ul>
          <li class="handle-item"><span class="layui-form-label">用户名：</span>
            <div class="layui-input-inline"><input type="text" autocomplete="off" id="userName" name="userName" placeholder="请输入搜索条件" class="layui-input"></div>
            <button class="layui-btn" id="btn-queryuser" data-type="reload">查询</button>
            <button class="layui-btn" id="btn-adduser" >添加</button>
            <button class="layui-btn layui-btn-danger" id="btn-deleteuser" >删除</button>
            <button class="layui-btn" id="btn-edituser" >编辑</button>
            <button class="layui-btn" id="btn-viewuser" >查看</button>
           </li>
        </ul>
      </div>
      <div id="userTable"></div>
    </div>
    
    <script>
    	layui.use(['layer','form','laydate','table','carousel', 'upload', 'element'], function(){
		  var $ = layui.jquery,
		  	layer = layui.layer,
		  	form = layui.form,
		  	laydate = layui.laydate,
		  	table = layui.table,
		  	carousel = layui.carousel,
		  	upload = layui.upload,
		  	element = layui.element;
		  	table.render({
			    elem: '#userTable',
			    url: contextPath+'/system/user/listByPage',
			    where:{
			    	 	//direction：'DESC',
			    		params: {
	    					userName:''
	    				} 
			    }, 
			    request:{
			    		pageName:'curr',
			    		limitName:'nums'
			    },
			    cols: [[
			      {checkbox: true, LAY_CHECKED: false}, //默认全选
			      {field: 'userId', title: '用户Id', width: '20%', sort: true},
			      {field: 'userName', title: '用户名', width: '20%', sort: true},
			      {field: 'nickName', title: '昵称', width: '20%', sort: true},
			      {field: 'password', title: '密码', width: '20%', sort: true},
			      {field: 'gender', title: '性别', width: '17%', sort: true},
			      {field: 'mobileNumber', title: '手机号码', width:'20%', sort: true}
			    ]], 
			    skin: 'row', //表格风格
			    even: true,
			    id: 'userTableId',
			    page: true, //是否显示分页
			    limits: [5, 10,15, 20,40],
			    limit: 10 //每页默认显示的数量
			});
		  	
		  	//查询
		  	$("#btn-queryuser").on('click', function() {
		  		var userName = $('#userName');
		    	      table.reload('userTableId', {
		    	        where: {
			    	     params: {
			    	    	 		userName:userName.val()
		    				} 
		    	        }
		    	      });
    			});
		    //新增
		  	$("#btn-adduser").on('click', function() {
		  		layer.open({
	  		    	  type: 2,
	  		    	  area: ['700px', '450px'],
	  		    	  fixed: false,
	  		    	  maxmin: true,
	  		    	  content: './user-add.html'
	  		    	});
	    		}); 
		  	
		  	$("#btn-deleteuser").on('click', function() {
		  		var checkStatus = table.checkStatus('userId');
		        var data = checkStatus.data;
		        layer.alert(data[0].userId);
		        
    		  	});
		  	
		  	$("#btn-edituser").on('click', function() {
	    			alert("refresh table");	
	  		});
		  	
		  	$("#btn-viewuser").on('click', function() {
		  		layer.open({
	  		    	  type: 2,
	  		    	  area: ['700px', '450px'],
	  		    	  fixed: false,
	  		    	  maxmin: true,
	  		    	  content: '/system-web/html/system/user/userview.html'
	  		    	});
  			});
			
   	 	});
    	
    	
    	
    		
	</script>
  </body>

</html>